<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Listening â€“ IELTS Mock</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f7fb;
      padding: 20px;
      text-align: center;
    }
    .test {
      background: white;
      padding: 20px;
      margin: 15px auto;
      max-width: 500px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    button {
      padding: 10px 20px;
      margin-top: 10px;
      background: #2563eb;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .locked {
      opacity: 0.6;
    }
  </style>

  <script>
    if (!localStorage.getItem("user_email")) {
      window.location.href = "register.html";
    }
  </script>
</head>
<body>

<h1>ðŸŽ§ IELTS Listening Practice</h1>
<p>Each test loads only one listening section. Premium unlocks all.</p>

<div id="tests"></div>

<script>
  const isPremium = localStorage.getItem("premium") === "true";

  const listeningTests = [
    { title: "Listening Test 1", free: true },
    { title: "Listening Test 2", free: true },
    { title: "Listening Test 3", free: false },
    { title: "Listening Test 4", free: false },
    { title: "Listening Test 5", free: false },
    { title: "Listening Test 6", free: false }
  ];

  const container = document.getElementById("tests");

  listeningTests.forEach(test => {
    const div = document.createElement("div");
    div.className = "test";

    if (!test.free && !isPremium) {
      div.classList.add("locked");
      div.innerHTML = `
        <h3>${test.title}</h3>
        <p>ðŸ”’ Premium only</p>
        <button onclick="alert('Premium sotib oling')">Unlock Premium</button>
      `;
    } else {
      div.innerHTML = `
        <h3>${test.title}</h3>
        <p>ðŸŽ§ Single listening section</p>
        <button onclick="startListening('${test.title}')">Start Test</button>
      `;
    }

    container.appendChild(div);
  });

  function startListening(name) {
    alert(name + " ochildi (demo)\nBu yerga audio + savollar qoâ€˜shiladi.");
  }// IELTS Listening band calculator
function getListeningBand(correct) {
  if (correct >= 39) return 9.0;
  if (correct >= 37) return 8.5;
  if (correct >= 35) return 8.0;
  if (correct >= 32) return 7.5;
  if (correct >= 30) return 7.0;
  if (correct >= 26) return 6.5;
  if (correct >= 23) return 6.0;
  if (correct >= 18) return 5.5;
  if (correct >= 16) return 5.0;
  if (correct >= 13) return 4.5;
  return 4.0;
}

function showListeningResult(correctAnswers) {
  const scaled = Math.round((correctAnswers / 10) * 40);
  const band = getListeningBand(scaled);

  alert(
    "Listening Result\n" +
    "Correct: " + scaled + "/40\n" +
    "Band Score: " + band
  );
}
</script>

<br>
<a href="index.html">â¬… Back to Home</a>

</body>
</html>